# DBInputSync
手机输入/语音转文字，电脑实时上屏

# 协助豆包输入法进行跨端输入的工具
> 解决豆包输入法暂时无PC版的痛点，实现**手机输入/语音转文字，电脑实时上屏**的局域网同步工具

## 功能介绍
由于豆包输入法目前仅支持安卓版本，无法直接在PC端使用其语音输入等便捷功能，本工具通过以下方式解决跨端输入需求：
1.  启动Python服务后，在局域网内生成一个网页输入界面
2.  手机浏览器访问该网页，可通过**豆包输入法语音/文字输入**内容
3.  点击发送按钮，内容会自动粘贴到电脑当前光标所在位置
4.  支持**自定义正则替换规则**，输入的指定关键词可自动替换为目标内容

## 核心特性
- 📱 **手机电脑无缝同步**：同一局域网内低延迟传输，无需数据线/第三方软件
- 🎙️ **借力手机输入法**：完美适配豆包输入法语音输入，解放电脑打字双手
- 🔧 **自定义替换规则**：通过配置文件实现关键词自动替换（如`男主 = 张无忌`）
- ⌨️ **快捷操作**：支持回车发送、快捷键提交，操作流畅

## 环境要求
### 硬件
- 电脑：Windows/macOS/Linux
- 手机：安卓/iOS（安装豆包输入法和浏览器）
- 手机与电脑**连接同一Wi-Fi/局域网**

<img width="750" height="578" alt="image" src="https://github.com/user-attachments/assets/c257076a-344f-4900-93bc-6495198221e4" />
<img width="781" height="702" alt="image" src="https://github.com/user-attachments/assets/5ba8c4c1-20c2-4054-8363-d652cfffa756" />

### 软件依赖
```bash
# Python 3.7+
pip install -r requirement.txt
```


# 快速使用步骤
下载代码将本仓库的 main.py 和 hot-rule.txt 保存到电脑同一目录下
启动服务
```bash
python main.py
```
启动成功后命令行会输出类似信息：
```plaintext
服务器已启动！
手机访问地址：http://192.168.3.105:5000
已加载 0 条替换规则
注意：手机和电脑需在同一局域网下
手机访问在手机浏览器中输入命令行显示的 http://[电脑局域网IP]:5000 地址，打开输入网页
开始输入
```

在手机网页输入框中，切换到豆包输入法，可语音或手动输入内容
点击「发送文本」按钮，内容会自动出现在电脑当前光标位置
点击「发送回车」可模拟电脑回车键操作
快捷操作：输入完成后直接按手机键盘回车即可发送

# 高级功能：正则替换规则
规则使用方法
通过修改 hot-rule.txt 文件，可实现输入文本的关键词自动替换，核心示例：
```txt
# 输入"男主"会自动替换为"张无忌"
男主 = 张无忌
```
当你在手机输入框中输入[男主的武功很高]，发送后电脑上会自动显示[张无忌的武功很高]
规则格式说明
```
# 注释行：以 # 开头的行不会生效
# 格式：[需要被替换的内容] = [替换后的内容]
# 支持正则表达式语法，以下是更多示例

# 基础关键词替换
女主 = 赵敏
教主 = 明教教主

# 正则表达式替换（去除所有空格）
\s+ = 

# 正则表达式替换（日期格式转换）
(\d{4})年(\d{2})月(\d{2})日 = $1-$2-$3
```
⚠️ 修改规则后需要重启 Python 服务才能生效

Flask	搭建轻量级网页服务器，提供输入界面和接口
pyautogui	模拟电脑键盘粘贴操作，实现文本上屏
pyperclip	剪贴板管理，避免覆盖用户原有剪贴板内容
socket	获取电脑局域网 IP，方便手机访问
re	实现正则替换规则引擎

# 更新日志
v0.0.4 添加了更多功能
- 服务启动后可以直接扫码
- 新增弹出键盘功能
- 删除手机和平板模式，改为布局选项
<img width="678" height="808" alt="image" src="https://github.com/user-attachments/assets/18eb83f1-23b6-41ff-b2b9-95b11dd4e996" />

v0.0.3 添加了更多功能
- 对平板和手机设备做出区分，也可以手动调节。
- 修复bug和引导提示

v0.0.2 添加了更多功能
- 新增文本清空功能
新增「清空文本」按钮，点击后可快速清空手机端输入框内容，不触发 PC 端任何操作
- 新增光标控制功能
左 / 上 / 下 / 右方向按钮，远程控制 PC 端光标移动
- 新增成对符号包裹功能
（）、“”、「」、[] 四组成对符号按钮，点击符号按钮弹出独立输入框，输入内容后按回车即可将内容包裹对应符号并插入到主输入框光标位置
- 界面优化（大概）
功能按钮按类型分组，使用不同颜色区分（功能按钮 / 方向按钮 / 符号按钮）
弹出输入框添加遮罩层，支持点击空白处关闭
![4c7040ff54bb9a9d945158fa1598ab5a](https://github.com/user-attachments/assets/40c2a1c5-529c-47a0-bf70-10a3b6212402)

