# 太白说
手机输入/语音转文字，电脑实时上屏

> 解决豆包输入法暂时无PC版的痛点，实现**手机输入/语音转文字，电脑实时上屏**的局域网同步工具

## 功能介绍
由于豆包输入法目前仅支持安卓版本，无法直接在PC端使用其语音输入等便捷功能，本工具通过以下方式解决跨端输入需求：
1. 启动Python服务后，在局域网内生成一个网页输入界面
2. 手机浏览器访问该网页，可通过**豆包输入法语音/文字输入**内容
3. 点击发送按钮，内容会自动粘贴到电脑当前光标所在位置
4. 支持**自定义正则替换规则**，输入的指定关键词可自动替换为目标内容

## 核心特性
- 📱 **手机电脑无缝同步**：同一局域网内低延迟传输，无需数据线/第三方软件
- 🎙️ **借力手机输入法**：完美适配豆包输入法语音输入，解放电脑打字双手
- 🔧 **自定义替换规则**：通过配置文件实现关键词自动替换（如`男主 = 张无忌`）
- ⌨️ **快捷命令和热键**：支持斜杠命令、终端热键，长按连续发送
- 🖱️ **全屏触控板**：手机变身触控板，远程控制电脑鼠标
- 🔐 **密码保护**：支持密码认证，安全访问

## 环境要求
### 硬件
- 电脑：Windows/macOS/Linux
- 手机：安卓/iOS（安装豆包输入法和浏览器）
- 手机与电脑**连接同一Wi-Fi/局域网**

### 软件依赖
```bash
# Python 3.7+
pip install -r requirement.txt
```

## 快速使用

### 基本启动
```bash
python main.py
```

### 带参数启动
```bash
python main.py -p 57777 --url https://your-domain.com --password yourpassword
```

参数说明：
- `-p, --port`：指定端口号（默认 5000）
- `--host`：指定监听地址（默认 0.0.0.0）
- `--url`：指定外部访问 URL（用于生成二维码）
- `--password`：设置访问密码

### PowerShell 启动脚本
```powershell
.\start.ps1
```

启动成功后命令行会输出类似信息：
```plaintext
服务器已启动！
手机访问地址：http://192.168.3.105:5000
已加载 0 条替换规则
注意：手机和电脑需在同一局域网下
```

## 使用说明

### 文本输入
1. 在手机网页输入框中，切换到豆包输入法，可语音或手动输入内容
2. 点击「发送」按钮，内容会自动出现在电脑当前光标位置
3. 支持自动发送：开启后停止输入一定时间自动发送

### 快捷命令
- 点击 ⚡ 图标打开命令菜单
- 支持斜杠命令（如 `/help`）和热键（如 `Ctrl+C`）
- 热键支持长按连续发送

### 全屏触控板
- 点击输入框右上角 🖱️ 图标进入触控板模式
- 滑动控制鼠标移动
- 单指点击 = 左键，双指点击 = 右键，快速双击 = 双击
- 点击 ⌨️ 图标返回文本输入模式

### 光标控制
- 方向键支持长按快速移动
- 退格键支持长按连续删除

## 高级功能：正则替换规则

通过修改 `hot-rule.txt` 文件，可实现输入文本的关键词自动替换：

```txt
# 输入"男主"会自动替换为"张无忌"
男主 = 张无忌

# 基础关键词替换
女主 = 赵敏

# 正则表达式替换（去除所有空格）
\s+ =

# 正则表达式替换（日期格式转换）
(\d{4})年(\d{2})月(\d{2})日 = $1-$2-$3
```

⚠️ 修改规则后需要重启服务才能生效

## 配置文件

| 文件 | 说明 |
|------|------|
| `hot-rule.txt` | 正则替换规则 |
| `commands.txt` | 快捷命令列表，`[KEY]` 前缀表示热键 |
| `phrases.txt` | 常用语列表 |

## 技术栈
- Flask - 轻量级网页服务器
- pyautogui - 模拟键盘鼠标操作
- pyperclip - 剪贴板管理
- qrcode - 二维码生成

## 致谢
本项目最初基于 [ChaserSu/DBInputSync](https://github.com/ChaserSu/DBInputSync) 开发。
